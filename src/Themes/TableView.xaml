<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:local="using:WinUI.TableView"
                    xmlns:helpers="using:WinUI.TableView.Helpers"
                    xmlns:interactivity="using:Microsoft.Xaml.Interactivity"
                    xmlns:behaviors="using:CommunityToolkit.WinUI.Behaviors"
                    xmlns:win="http://schemas.microsoft.com/winfx/2006/xaml/presentation">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="ms-appx:///WinUI.TableView/Themes/Resources.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <Style x:Key="DefaultTableViewStyle"
           TargetType="local:TableView">
        <Setter Property="IsTabStop"
                Value="False" />
        <Setter Property="TabNavigation"
                Value="Cycle" />
        <win:Setter Property="IsSwipeEnabled"
                Value="False" />
        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility"
                Value="Auto" />
        <Setter Property="ScrollViewer.VerticalScrollBarVisibility"
                Value="Auto" />
        <Setter Property="ScrollViewer.HorizontalScrollMode"
                Value="Auto" />
        <win:Setter Property="ScrollViewer.IsHorizontalRailEnabled"
                Value="True" />
        <Setter Property="ScrollViewer.VerticalScrollMode"
                Value="Enabled" />
        <win:Setter Property="ScrollViewer.IsVerticalRailEnabled"
                Value="True" />
        <Setter Property="ScrollViewer.ZoomMode"
                Value="Disabled" />
        <win:Setter Property="ScrollViewer.IsDeferredScrollingEnabled"
                Value="False" />
        <Setter Property="ScrollViewer.BringIntoViewOnFocusChange"
                Value="True" />
        <Setter Property="UseSystemFocusVisuals"
                Value="{StaticResource UseSystemFocusVisuals}" />
        <Setter Property="CornerRadius"
                Value="{ThemeResource ControlCornerRadius}" />
        <Setter Property="BorderBrush"
                Value="{ThemeResource TableViewBorderBrush}" />
        <Setter Property="BorderThickness"
                Value="1" />
        <Setter Property="SingleSelectionFollowsFocus"
                Value="False" />
        <Setter Property="HorizontalGridLinesStroke"
                Value="{ThemeResource TableViewHorizontalGridLineStroke}" />
        <Setter Property="VerticalGridLinesStroke"
                Value="{ThemeResource TableViewVerticalGridLineStroke}" />
        <Setter Property="HorizontalGridLinesStrokeThickness"
                Value="{ThemeResource TableViewHorizontalGridLineStrokeThickness}" />
        <Setter Property="VerticalGridLinesStrokeThickness"
                Value="{ThemeResource TableViewVerticalGridLineStrokeThickness}" />
        <win:Setter Property="ItemContainerTransitions">
            <win:Setter.Value>
                <TransitionCollection>
                    <AddDeleteThemeTransition />
                    <ContentThemeTransition />
                    <ReorderThemeTransition />
                    <EntranceThemeTransition IsStaggeringEnabled="False" />
                </TransitionCollection>
            </win:Setter.Value>
        </win:Setter>
        <Setter Property="ItemsPanel">
            <Setter.Value>
                <ItemsPanelTemplate>
                    <ItemsStackPanel Orientation="Vertical" />
                </ItemsPanelTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="ItemTemplate">
            <Setter.Value>
                <DataTemplate>
                    <local:TableViewCellsPresenter IsTabStop="False" />
                </DataTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:TableView">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="{TemplateBinding CornerRadius}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition x:Name="HeaderRowDefinition" Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>

                            <local:TableViewHeaderRow x:Name="HeaderRow"
                                                      IsTabStop="False"
                                                      Height="{TemplateBinding HeaderRowHeight}"
                                                      MaxHeight="{TemplateBinding HeaderRowMaxHeight}"
                                                      MinHeight="{TemplateBinding HeaderRowMinHeight}"
                                                      TableView="{Binding RelativeSource={RelativeSource TemplatedParent}}" />

                            <ScrollViewer x:Name="ScrollViewer"
                                          Grid.Row="1"
                                          helpers:ScrollViewerHelper.FrozenColumnScrollBarSpace="{TemplateBinding RowHeaderMinWidth}"
                                          TabNavigation="{TemplateBinding TabNavigation}"
                                          HorizontalScrollMode="{TemplateBinding ScrollViewer.HorizontalScrollMode}"
                                          HorizontalScrollBarVisibility="{TemplateBinding ScrollViewer.HorizontalScrollBarVisibility}"
                                          win:IsHorizontalScrollChainingEnabled="{TemplateBinding ScrollViewer.IsHorizontalScrollChainingEnabled}"
                                          VerticalScrollMode="{TemplateBinding ScrollViewer.VerticalScrollMode}"
                                          VerticalScrollBarVisibility="{TemplateBinding ScrollViewer.VerticalScrollBarVisibility}"
                                          win:IsVerticalScrollChainingEnabled="{TemplateBinding ScrollViewer.IsVerticalScrollChainingEnabled}"
                                          win:IsHorizontalRailEnabled="{TemplateBinding ScrollViewer.IsHorizontalRailEnabled}"
                                          win:IsVerticalRailEnabled="{TemplateBinding ScrollViewer.IsVerticalRailEnabled}"
                                          ZoomMode="{TemplateBinding ScrollViewer.ZoomMode}"
                                          win:IsDeferredScrollingEnabled="{TemplateBinding ScrollViewer.IsDeferredScrollingEnabled}"
                                          BringIntoViewOnFocusChange="{TemplateBinding ScrollViewer.BringIntoViewOnFocusChange}"
                                          win:AutomationProperties.AccessibilityView="Raw"
                                          Template="{StaticResource TableViewScrollViewerTemplate}">
                                <ItemsPresenter Padding="{TemplateBinding Padding}" />
                            </ScrollViewer>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <ControlTemplate x:Key="TableViewScrollViewerTemplate"
                     TargetType="ScrollViewer">
        <Border x:Name="Root"
                BorderBrush="{TemplateBinding BorderBrush}"
                BorderThickness="{TemplateBinding BorderThickness}"
                CornerRadius="{TemplateBinding CornerRadius}">

            <VisualStateManager.VisualStateGroups>
                <VisualStateGroup x:Name="ScrollingIndicatorStates">

                    <VisualStateGroup.Transitions>
                        <VisualTransition From="MouseIndicator"
                                          To="NoIndicator">

                            <Storyboard>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="VerticalScrollBar"
                                                               Storyboard.TargetProperty="IndicatorMode">
                                    <DiscreteObjectKeyFrame KeyTime="{ThemeResource ScrollViewerSeparatorContractDelay}">
                                        <DiscreteObjectKeyFrame.Value>
                                            <ScrollingIndicatorMode>None</ScrollingIndicatorMode>
                                        </DiscreteObjectKeyFrame.Value>
                                    </DiscreteObjectKeyFrame>
                                </ObjectAnimationUsingKeyFrames>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HorizontalScrollBar2"
                                                               Storyboard.TargetProperty="IndicatorMode">
                                    <DiscreteObjectKeyFrame KeyTime="{ThemeResource ScrollViewerSeparatorContractDelay}">
                                        <DiscreteObjectKeyFrame.Value>
                                            <ScrollingIndicatorMode>None</ScrollingIndicatorMode>
                                        </DiscreteObjectKeyFrame.Value>
                                    </DiscreteObjectKeyFrame>
                                </ObjectAnimationUsingKeyFrames>
                            </Storyboard>
                        </VisualTransition>
                        <VisualTransition From="MouseIndicatorFull"
                                          To="NoIndicator">

                            <Storyboard>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="VerticalScrollBar"
                                                               Storyboard.TargetProperty="IndicatorMode">
                                    <DiscreteObjectKeyFrame KeyTime="{ThemeResource ScrollViewerSeparatorContractDelay}">
                                        <DiscreteObjectKeyFrame.Value>
                                            <ScrollingIndicatorMode>None</ScrollingIndicatorMode>
                                        </DiscreteObjectKeyFrame.Value>
                                    </DiscreteObjectKeyFrame>
                                </ObjectAnimationUsingKeyFrames>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HorizontalScrollBar2"
                                                               Storyboard.TargetProperty="IndicatorMode">
                                    <DiscreteObjectKeyFrame KeyTime="{ThemeResource ScrollViewerSeparatorContractDelay}">
                                        <DiscreteObjectKeyFrame.Value>
                                            <ScrollingIndicatorMode>None</ScrollingIndicatorMode>
                                        </DiscreteObjectKeyFrame.Value>
                                    </DiscreteObjectKeyFrame>
                                </ObjectAnimationUsingKeyFrames>
                            </Storyboard>
                        </VisualTransition>
                        <VisualTransition From="MouseIndicatorFull"
                                          To="MouseIndicator">

                            <Storyboard>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="VerticalScrollBar"
                                                               Storyboard.TargetProperty="IndicatorMode">
                                    <DiscreteObjectKeyFrame KeyTime="{ThemeResource ScrollViewerSeparatorContractDelay}">
                                        <DiscreteObjectKeyFrame.Value>
                                            <ScrollingIndicatorMode>MouseIndicator</ScrollingIndicatorMode>
                                        </DiscreteObjectKeyFrame.Value>
                                    </DiscreteObjectKeyFrame>
                                </ObjectAnimationUsingKeyFrames>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HorizontalScrollBar2"
                                                               Storyboard.TargetProperty="IndicatorMode">
                                    <DiscreteObjectKeyFrame KeyTime="{ThemeResource ScrollViewerSeparatorContractDelay}">
                                        <DiscreteObjectKeyFrame.Value>
                                            <ScrollingIndicatorMode>MouseIndicator</ScrollingIndicatorMode>
                                        </DiscreteObjectKeyFrame.Value>
                                    </DiscreteObjectKeyFrame>
                                </ObjectAnimationUsingKeyFrames>
                            </Storyboard>
                        </VisualTransition>
                        <VisualTransition From="TouchIndicator"
                                          To="NoIndicator">

                            <Storyboard>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="VerticalScrollBar"
                                                               Storyboard.TargetProperty="IndicatorMode">
                                    <DiscreteObjectKeyFrame KeyTime="0:0:0.5">
                                        <DiscreteObjectKeyFrame.Value>
                                            <ScrollingIndicatorMode>None</ScrollingIndicatorMode>
                                        </DiscreteObjectKeyFrame.Value>
                                    </DiscreteObjectKeyFrame>
                                </ObjectAnimationUsingKeyFrames>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HorizontalScrollBar2"
                                                               Storyboard.TargetProperty="IndicatorMode">
                                    <DiscreteObjectKeyFrame KeyTime="0:0:0.5">
                                        <DiscreteObjectKeyFrame.Value>
                                            <ScrollingIndicatorMode>None</ScrollingIndicatorMode>
                                        </DiscreteObjectKeyFrame.Value>
                                    </DiscreteObjectKeyFrame>
                                </ObjectAnimationUsingKeyFrames>
                            </Storyboard>
                        </VisualTransition>
                    </VisualStateGroup.Transitions>
                    <VisualState x:Name="NoIndicator" />
                    <VisualState x:Name="TouchIndicator">

                        <Storyboard>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="VerticalScrollBar"
                                                           Storyboard.TargetProperty="IndicatorMode">
                                <DiscreteObjectKeyFrame KeyTime="0">
                                    <DiscreteObjectKeyFrame.Value>
                                        <ScrollingIndicatorMode>TouchIndicator</ScrollingIndicatorMode>
                                    </DiscreteObjectKeyFrame.Value>
                                </DiscreteObjectKeyFrame>
                            </ObjectAnimationUsingKeyFrames>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HorizontalScrollBar2"
                                                           Storyboard.TargetProperty="IndicatorMode">
                                <DiscreteObjectKeyFrame KeyTime="0">
                                    <DiscreteObjectKeyFrame.Value>
                                        <ScrollingIndicatorMode>TouchIndicator</ScrollingIndicatorMode>
                                    </DiscreteObjectKeyFrame.Value>
                                </DiscreteObjectKeyFrame>
                            </ObjectAnimationUsingKeyFrames>
                        </Storyboard>
                    </VisualState>
                    <VisualState x:Name="MouseIndicator">

                        <Storyboard>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="VerticalScrollBar"
                                                           Storyboard.TargetProperty="IndicatorMode">
                                <DiscreteObjectKeyFrame KeyTime="0">
                                    <DiscreteObjectKeyFrame.Value>
                                        <ScrollingIndicatorMode>MouseIndicator</ScrollingIndicatorMode>
                                    </DiscreteObjectKeyFrame.Value>
                                </DiscreteObjectKeyFrame>
                            </ObjectAnimationUsingKeyFrames>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HorizontalScrollBar2"
                                                           Storyboard.TargetProperty="IndicatorMode">
                                <DiscreteObjectKeyFrame KeyTime="0">
                                    <DiscreteObjectKeyFrame.Value>
                                        <ScrollingIndicatorMode>MouseIndicator</ScrollingIndicatorMode>
                                    </DiscreteObjectKeyFrame.Value>
                                </DiscreteObjectKeyFrame>
                            </ObjectAnimationUsingKeyFrames>
                        </Storyboard>
                    </VisualState>
                    <VisualState x:Name="MouseIndicatorFull">

                        <Storyboard>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="VerticalScrollBar"
                                                           Storyboard.TargetProperty="IndicatorMode">
                                <DiscreteObjectKeyFrame KeyTime="0">
                                    <DiscreteObjectKeyFrame.Value>
                                        <ScrollingIndicatorMode>MouseIndicator</ScrollingIndicatorMode>
                                    </DiscreteObjectKeyFrame.Value>
                                </DiscreteObjectKeyFrame>
                            </ObjectAnimationUsingKeyFrames>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HorizontalScrollBar2"
                                                           Storyboard.TargetProperty="IndicatorMode">
                                <DiscreteObjectKeyFrame KeyTime="0">
                                    <DiscreteObjectKeyFrame.Value>
                                        <ScrollingIndicatorMode>MouseIndicator</ScrollingIndicatorMode>
                                    </DiscreteObjectKeyFrame.Value>
                                </DiscreteObjectKeyFrame>
                            </ObjectAnimationUsingKeyFrames>
                        </Storyboard>
                    </VisualState>

                </VisualStateGroup>
                <VisualStateGroup x:Name="ScrollBarSeparatorStates">

                    <VisualStateGroup.Transitions>
                        <VisualTransition From="ScrollBarSeparatorExpanded"
                                          To="ScrollBarSeparatorCollapsed">

                            <Storyboard>
                                <DoubleAnimation Duration="{ThemeResource ScrollViewerSeparatorContractDuration}"
                                                 BeginTime="{ThemeResource ScrollViewerSeparatorContractBeginTime}"
                                                 Storyboard.TargetName="ScrollBarSeparator"
                                                 Storyboard.TargetProperty="Opacity"
                                                 To="0" />
                            </Storyboard>
                        </VisualTransition>
                    </VisualStateGroup.Transitions>
                    <VisualState x:Name="ScrollBarSeparatorCollapsed" />
                    <VisualState x:Name="ScrollBarSeparatorExpanded">

                        <Storyboard>
                            <DoubleAnimation Duration="{ThemeResource ScrollViewerSeparatorExpandDuration}"
                                             BeginTime="{ThemeResource ScrollViewerSeparatorExpandBeginTime}"
                                             Storyboard.TargetName="ScrollBarSeparator"
                                             Storyboard.TargetProperty="Opacity"
                                             To="1" />
                        </Storyboard>
                    </VisualState>
                    <VisualState x:Name="ScrollBarSeparatorExpandedWithoutAnimation">

                        <Storyboard>
                            <DoubleAnimation Duration="0"
                                             BeginTime="{ThemeResource ScrollViewerSeparatorExpandBeginTime}"
                                             Storyboard.TargetName="ScrollBarSeparator"
                                             Storyboard.TargetProperty="Opacity"
                                             To="1" />
                        </Storyboard>
                    </VisualState>
                    <VisualState x:Name="ScrollBarSeparatorCollapsedWithoutAnimation">

                        <Storyboard>
                            <DoubleAnimation Duration="0"
                                             BeginTime="{ThemeResource ScrollViewerSeparatorContractBeginTime}"
                                             Storyboard.TargetName="ScrollBarSeparator"
                                             Storyboard.TargetProperty="Opacity"
                                             To="0" />
                        </Storyboard>
                    </VisualState>

                </VisualStateGroup>

            </VisualStateManager.VisualStateGroups>
            <Grid Background="{TemplateBinding Background}">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <ScrollContentPresenter x:Name="ScrollContentPresenter"
                                        Grid.RowSpan="2"
                                        Grid.ColumnSpan="2"
                                        ContentTemplate="{TemplateBinding ContentTemplate}"
                                        Margin="{TemplateBinding Padding}" />
                <Grid Grid.RowSpan="2"
                      Grid.ColumnSpan="2" />
                <Grid Grid.Column="1"
                      Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"
                      Padding="{ThemeResource ScrollViewerScrollBarMargin}">
                    <ScrollBar x:Name="VerticalScrollBar"
                               IsTabStop="False"
                               Maximum="{TemplateBinding ScrollableHeight}"
                               Orientation="Vertical"
                               Value="{TemplateBinding VerticalOffset}"
                               ViewportSize="{TemplateBinding ViewportHeight}"
                               HorizontalAlignment="Right" />
                </Grid>
                <Grid Grid.Row="1"
                      Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"
                      Padding="{ThemeResource ScrollViewerScrollBarMargin}">

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <Border Opacity="0"
                            MinWidth="{Binding (helpers:ScrollViewerHelper.FrozenColumnScrollBarSpace), RelativeSource={RelativeSource TemplatedParent}}"
                            Background="{ThemeResource ScrollViewerScrollBarSeparatorBackground}" />

                    <ScrollBar x:Name="HorizontalScrollBar2"
                               Grid.Column="1"
                               IsTabStop="False"
                               Maximum="{TemplateBinding ScrollableWidth}"
                               Orientation="Horizontal"
                               ViewportSize="{TemplateBinding ViewportWidth}" />
                </Grid>
                <Border x:Name="ScrollBarSeparator"
                        Grid.Row="1"
                        Grid.Column="1"
                        Opacity="0"
                        Background="{ThemeResource ScrollViewerScrollBarSeparatorBackground}" />

            </Grid>
        </Border>

    </ControlTemplate>

</ResourceDictionary>
